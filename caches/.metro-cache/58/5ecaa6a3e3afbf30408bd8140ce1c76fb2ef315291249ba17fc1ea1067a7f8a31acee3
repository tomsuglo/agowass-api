{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\"));\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n  /**\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   */\n  var InternetReachability = exports.default = /*#__PURE__*/(0, _createClass2.default)(function InternetReachability(configuration, listener) {\n    (0, _classCallCheck2.default)(this, InternetReachability);\n    this._isInternetReachable = undefined;\n    this._currentInternetReachabilityCheckHandler = null;\n    this._currentTimeoutHandle = null;\n    this._setIsInternetReachable = isInternetReachable => {\n      if (this._isInternetReachable === isInternetReachable) {\n        return;\n      }\n      this._isInternetReachable = isInternetReachable;\n      this._listener(this._isInternetReachable);\n    };\n    this._setExpectsConnection = expectsConnection => {\n      // Cancel any pending check\n      if (this._currentInternetReachabilityCheckHandler !== null) {\n        this._currentInternetReachabilityCheckHandler.cancel();\n        this._currentInternetReachabilityCheckHandler = null;\n      }\n      // Cancel any pending timeout\n      if (this._currentTimeoutHandle !== null) {\n        clearTimeout(this._currentTimeoutHandle);\n        this._currentTimeoutHandle = null;\n      }\n      if (expectsConnection && this._configuration.reachabilityShouldRun()) {\n        // If we expect a connection, start the process for finding if we have one\n        // Set the state to \"null\" if it was previously false\n        if (!this._isInternetReachable) {\n          this._setIsInternetReachable(null);\n        }\n        // Start a network request to check for internet\n        this._currentInternetReachabilityCheckHandler = this._checkInternetReachability();\n      } else {\n        // If we don't expect a connection or don't run reachability check, just change the state to \"false\"\n        this._setIsInternetReachable(false);\n      }\n    };\n    this._checkInternetReachability = () => {\n      var controller = new AbortController();\n      var responsePromise = fetch(this._configuration.reachabilityUrl, {\n        headers: this._configuration.reachabilityHeaders,\n        method: this._configuration.reachabilityMethod,\n        cache: 'no-cache',\n        signal: controller.signal\n      });\n\n      // Create promise that will reject after the request timeout has been reached\n      var timeoutHandle;\n      var timeoutPromise = new Promise((_, reject) => {\n        timeoutHandle = setTimeout(() => reject('timedout'), this._configuration.reachabilityRequestTimeout);\n      });\n\n      // Create promise that makes it possible to cancel a pending request through a reject\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      var cancel = () => {};\n      var cancelPromise = new Promise((_, reject) => {\n        cancel = () => reject('canceled');\n      });\n      var promise = Promise.race([responsePromise, timeoutPromise, cancelPromise]).then(response => {\n        return this._configuration.reachabilityTest(response);\n      }).then(result => {\n        this._setIsInternetReachable(result);\n        var nextTimeoutInterval = this._isInternetReachable ? this._configuration.reachabilityLongTimeout : this._configuration.reachabilityShortTimeout;\n        this._currentTimeoutHandle = setTimeout(this._checkInternetReachability, nextTimeoutInterval);\n      }).catch(error => {\n        if ('canceled' === error) {\n          controller.abort();\n        } else {\n          if ('timedout' === error) {\n            controller.abort();\n          }\n          this._setIsInternetReachable(false);\n          this._currentTimeoutHandle = setTimeout(this._checkInternetReachability, this._configuration.reachabilityShortTimeout);\n        }\n      })\n      // Clear request timeout and propagate any errors\n      .then(() => {\n        clearTimeout(timeoutHandle);\n      }, error => {\n        clearTimeout(timeoutHandle);\n        throw error;\n      });\n      return {\n        promise,\n        cancel\n      };\n    };\n    this.update = state => {\n      if (typeof state.isInternetReachable === 'boolean' && this._configuration.useNativeReachability) {\n        this._setIsInternetReachable(state.isInternetReachable);\n      } else {\n        this._setExpectsConnection(state.isConnected);\n      }\n    };\n    this.currentState = () => {\n      return this._isInternetReachable;\n    };\n    this.tearDown = () => {\n      // Cancel any pending check\n      if (this._currentInternetReachabilityCheckHandler !== null) {\n        this._currentInternetReachabilityCheckHandler.cancel();\n        this._currentInternetReachabilityCheckHandler = null;\n      }\n\n      // Cancel any pending timeout\n      if (this._currentTimeoutHandle !== null) {\n        clearTimeout(this._currentTimeoutHandle);\n        this._currentTimeoutHandle = null;\n      }\n    };\n    this._configuration = configuration;\n    this._listener = listener;\n  });\n});","lineCount":129,"map":[[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,2,1,0],[17,6,18,21,"InternetReachability"],[17,26,18,41],[17,29,18,41,"exports"],[17,36,18,41],[17,37,18,41,"default"],[17,44,18,41],[17,64,18,41,"_createClass2"],[17,77,18,41],[17,78,18,41,"default"],[17,85,18,41],[17,87,25,2],[17,96,25,2,"InternetReachability"],[17,117,26,4,"configuration"],[17,130,26,45],[17,132,27,4,"listener"],[17,140,27,68],[17,142,28,4],[18,4,28,4],[18,8,28,4,"_classCallCheck2"],[18,24,28,4],[18,25,28,4,"default"],[18,32,28,4],[18,40,28,4,"InternetReachability"],[18,60,28,4],[19,4,28,4],[19,9,21,10,"_isInternetReachable"],[19,29,21,30],[19,32,21,61,"undefined"],[19,41,21,70],[20,4,21,70],[20,9,22,10,"_currentInternetReachabilityCheckHandler"],[20,49,22,50],[20,52,22,94],[20,56,22,98],[21,4,22,98],[21,9,23,10,"_currentTimeoutHandle"],[21,30,23,31],[21,33,23,72],[21,37,23,76],[22,4,23,76],[22,9,33,10,"_setIsInternetReachable"],[22,32,33,33],[22,35,34,4,"isInternetReachable"],[22,54,34,39],[22,58,35,13],[23,6,36,4],[23,10,36,8],[23,14,36,12],[23,15,36,13,"_isInternetReachable"],[23,35,36,33],[23,40,36,38,"isInternetReachable"],[23,59,36,57],[23,61,36,59],[24,8,37,6],[25,6,38,4],[26,6,40,4],[26,10,40,8],[26,11,40,9,"_isInternetReachable"],[26,31,40,29],[26,34,40,32,"isInternetReachable"],[26,53,40,51],[27,6,41,4],[27,10,41,8],[27,11,41,9,"_listener"],[27,20,41,18],[27,21,41,19],[27,25,41,23],[27,26,41,24,"_isInternetReachable"],[27,46,41,44],[27,47,41,45],[28,4,42,2],[28,5,42,3],[29,4,42,3],[29,9,44,10,"_setExpectsConnection"],[29,30,44,31],[29,33,44,35,"expectsConnection"],[29,50,44,68],[29,54,44,79],[30,6,45,4],[31,6,46,4],[31,10,46,8],[31,14,46,12],[31,15,46,13,"_currentInternetReachabilityCheckHandler"],[31,55,46,53],[31,60,46,58],[31,64,46,62],[31,66,46,64],[32,8,47,6],[32,12,47,10],[32,13,47,11,"_currentInternetReachabilityCheckHandler"],[32,53,47,51],[32,54,47,52,"cancel"],[32,60,47,58],[32,61,47,59],[32,62,47,60],[33,8,48,6],[33,12,48,10],[33,13,48,11,"_currentInternetReachabilityCheckHandler"],[33,53,48,51],[33,56,48,54],[33,60,48,58],[34,6,49,4],[35,6,50,4],[36,6,51,4],[36,10,51,8],[36,14,51,12],[36,15,51,13,"_currentTimeoutHandle"],[36,36,51,34],[36,41,51,39],[36,45,51,43],[36,47,51,45],[37,8,52,6,"clearTimeout"],[37,20,52,18],[37,21,52,19],[37,25,52,23],[37,26,52,24,"_currentTimeoutHandle"],[37,47,52,45],[37,48,52,46],[38,8,53,6],[38,12,53,10],[38,13,53,11,"_currentTimeoutHandle"],[38,34,53,32],[38,37,53,35],[38,41,53,39],[39,6,54,4],[40,6,56,4],[40,10,56,8,"expectsConnection"],[40,27,56,25],[40,31,56,29],[40,35,56,33],[40,36,56,34,"_configuration"],[40,50,56,48],[40,51,56,49,"reachabilityShouldRun"],[40,72,56,70],[40,73,56,71],[40,74,56,72],[40,76,56,74],[41,8,57,6],[42,8,58,6],[43,8,59,6],[43,12,59,10],[43,13,59,11],[43,17,59,15],[43,18,59,16,"_isInternetReachable"],[43,38,59,36],[43,40,59,38],[44,10,60,8],[44,14,60,12],[44,15,60,13,"_setIsInternetReachable"],[44,38,60,36],[44,39,60,37],[44,43,60,41],[44,44,60,42],[45,8,61,6],[46,8,62,6],[47,8,63,6],[47,12,63,10],[47,13,63,11,"_currentInternetReachabilityCheckHandler"],[47,53,63,51],[47,56,63,54],[47,60,63,58],[47,61,63,59,"_checkInternetReachability"],[47,87,63,85],[47,88,63,86],[47,89,63,87],[48,6,64,4],[48,7,64,5],[48,13,64,11],[49,8,65,6],[50,8,66,6],[50,12,66,10],[50,13,66,11,"_setIsInternetReachable"],[50,36,66,34],[50,37,66,35],[50,42,66,40],[50,43,66,41],[51,6,67,4],[52,4,68,2],[52,5,68,3],[53,4,68,3],[53,9,70,10,"_checkInternetReachability"],[53,35,70,36],[53,38,70,39],[53,44,70,79],[54,6,71,4],[54,10,71,10,"controller"],[54,20,71,20],[54,23,71,23],[54,27,71,27,"AbortController"],[54,42,71,42],[54,43,71,43],[54,44,71,44],[55,6,73,4],[55,10,73,10,"responsePromise"],[55,25,73,25],[55,28,73,28,"fetch"],[55,33,73,33],[55,34,73,34],[55,38,73,38],[55,39,73,39,"_configuration"],[55,53,73,53],[55,54,73,54,"reachabilityUrl"],[55,69,73,69],[55,71,73,71],[56,8,74,6,"headers"],[56,15,74,13],[56,17,74,15],[56,21,74,19],[56,22,74,20,"_configuration"],[56,36,74,34],[56,37,74,35,"reachabilityHeaders"],[56,56,74,54],[57,8,75,6,"method"],[57,14,75,12],[57,16,75,14],[57,20,75,18],[57,21,75,19,"_configuration"],[57,35,75,33],[57,36,75,34,"reachabilityMethod"],[57,54,75,52],[58,8,76,6,"cache"],[58,13,76,11],[58,15,76,13],[58,25,76,23],[59,8,77,6,"signal"],[59,14,77,12],[59,16,77,14,"controller"],[59,26,77,24],[59,27,77,25,"signal"],[60,6,78,4],[60,7,78,5],[60,8,78,6],[62,6,80,4],[63,6,81,4],[63,10,81,8,"timeoutHandle"],[63,23,81,52],[64,6,82,4],[64,10,82,10,"timeoutPromise"],[64,24,82,24],[64,27,82,27],[64,31,82,31,"Promise"],[64,38,82,38],[64,39,82,49],[64,40,82,50,"_"],[64,41,82,51],[64,43,82,53,"reject"],[64,49,82,59],[64,54,82,70],[65,8,83,6,"timeoutHandle"],[65,21,83,19],[65,24,83,22,"setTimeout"],[65,34,83,32],[65,35,84,8],[65,41,84,20,"reject"],[65,47,84,26],[65,48,84,27],[65,58,84,37],[65,59,84,38],[65,61,85,8],[65,65,85,12],[65,66,85,13,"_configuration"],[65,80,85,27],[65,81,85,28,"reachabilityRequestTimeout"],[65,107,86,6],[65,108,86,7],[66,6,87,4],[66,7,87,5],[66,8,87,6],[68,6,89,4],[69,6,90,4],[70,6,91,4],[70,10,91,8,"cancel"],[70,16,91,26],[70,19,91,29,"cancel"],[70,20,91,29],[70,25,91,41],[70,26,91,42],[70,27,91,43],[71,6,92,4],[71,10,92,10,"cancelPromise"],[71,23,92,23],[71,26,92,26],[71,30,92,30,"Promise"],[71,37,92,37],[71,38,92,48],[71,39,92,49,"_"],[71,40,92,50],[71,42,92,52,"reject"],[71,48,92,58],[71,53,92,69],[72,8,93,6,"cancel"],[72,14,93,12],[72,17,93,15,"cancel"],[72,18,93,15],[72,23,93,27,"reject"],[72,29,93,33],[72,30,93,34],[72,40,93,44],[72,41,93,45],[73,6,94,4],[73,7,94,5],[73,8,94,6],[74,6,96,4],[74,10,96,10,"promise"],[74,17,96,17],[74,20,96,20,"Promise"],[74,27,96,27],[74,28,96,28,"race"],[74,32,96,32],[74,33,96,33],[74,34,97,6,"responsePromise"],[74,49,97,21],[74,51,98,6,"timeoutPromise"],[74,65,98,20],[74,67,99,6,"cancelPromise"],[74,80,99,19],[74,81,100,5],[74,82,100,6],[74,83,101,7,"then"],[74,87,101,11],[74,88,102,9,"response"],[74,96,102,17],[74,100,102,40],[75,8,103,10],[75,15,103,17],[75,19,103,21],[75,20,103,22,"_configuration"],[75,34,103,36],[75,35,103,37,"reachabilityTest"],[75,51,103,53],[75,52,103,54,"response"],[75,60,103,62],[75,61,103,63],[76,6,104,8],[76,7,105,6],[76,8,105,7],[76,9,106,7,"then"],[76,13,106,11],[76,14,107,9,"result"],[76,20,107,15],[76,24,107,26],[77,8,108,10],[77,12,108,14],[77,13,108,15,"_setIsInternetReachable"],[77,36,108,38],[77,37,108,39,"result"],[77,43,108,45],[77,44,108,46],[78,8,109,10],[78,12,109,16,"nextTimeoutInterval"],[78,31,109,35],[78,34,109,38],[78,38,109,42],[78,39,109,43,"_isInternetReachable"],[78,59,109,63],[78,62,110,14],[78,66,110,18],[78,67,110,19,"_configuration"],[78,81,110,33],[78,82,110,34,"reachabilityLongTimeout"],[78,105,110,57],[78,108,111,14],[78,112,111,18],[78,113,111,19,"_configuration"],[78,127,111,33],[78,128,111,34,"reachabilityShortTimeout"],[78,152,111,58],[79,8,112,10],[79,12,112,14],[79,13,112,15,"_currentTimeoutHandle"],[79,34,112,36],[79,37,112,39,"setTimeout"],[79,47,112,49],[79,48,113,12],[79,52,113,16],[79,53,113,17,"_checkInternetReachability"],[79,79,113,43],[79,81,114,12,"nextTimeoutInterval"],[79,100,115,10],[79,101,115,11],[80,6,116,8],[80,7,117,6],[80,8,117,7],[80,9,118,7,"catch"],[80,14,118,12],[80,15,119,9,"error"],[80,20,119,47],[80,24,119,58],[81,8,120,10],[81,12,120,14],[81,22,120,24],[81,27,120,29,"error"],[81,32,120,34],[81,34,120,36],[82,10,121,12,"controller"],[82,20,121,22],[82,21,121,23,"abort"],[82,26,121,28],[82,27,121,29],[82,28,121,30],[83,8,122,10],[83,9,122,11],[83,15,122,17],[84,10,123,12],[84,14,123,16],[84,24,123,26],[84,29,123,31,"error"],[84,34,123,36],[84,36,123,38],[85,12,124,14,"controller"],[85,22,124,24],[85,23,124,25,"abort"],[85,28,124,30],[85,29,124,31],[85,30,124,32],[86,10,125,12],[87,10,127,12],[87,14,127,16],[87,15,127,17,"_setIsInternetReachable"],[87,38,127,40],[87,39,127,41],[87,44,127,46],[87,45,127,47],[88,10,128,12],[88,14,128,16],[88,15,128,17,"_currentTimeoutHandle"],[88,36,128,38],[88,39,128,41,"setTimeout"],[88,49,128,51],[88,50,129,14],[88,54,129,18],[88,55,129,19,"_checkInternetReachability"],[88,81,129,45],[88,83,130,14],[88,87,130,18],[88,88,130,19,"_configuration"],[88,102,130,33],[88,103,130,34,"reachabilityShortTimeout"],[88,127,131,12],[88,128,131,13],[89,8,132,10],[90,6,133,8],[90,7,134,6],[91,6,135,6],[92,6,135,6],[92,7,136,7,"then"],[92,11,136,11],[92,12,137,8],[92,18,137,20],[93,8,138,10,"clearTimeout"],[93,20,138,22],[93,21,138,23,"timeoutHandle"],[93,34,138,36],[93,35,138,37],[94,6,139,8],[94,7,139,9],[94,9,140,9,"error"],[94,14,140,21],[94,18,140,32],[95,8,141,10,"clearTimeout"],[95,20,141,22],[95,21,141,23,"timeoutHandle"],[95,34,141,36],[95,35,141,37],[96,8,142,10],[96,14,142,16,"error"],[96,19,142,21],[97,6,143,8],[97,7,144,6],[97,8,144,7],[98,6,146,4],[98,13,146,11],[99,8,147,6,"promise"],[99,15,147,13],[100,8,148,6,"cancel"],[101,6,149,4],[101,7,149,5],[102,4,150,2],[102,5,150,3],[103,4,150,3],[103,9,152,9,"update"],[103,15,152,15],[103,18,152,19,"state"],[103,23,152,63],[103,27,152,74],[104,6,153,4],[104,10,154,6],[104,17,154,13,"state"],[104,22,154,18],[104,23,154,19,"isInternetReachable"],[104,42,154,38],[104,47,154,43],[104,56,154,52],[104,60,155,6],[104,64,155,10],[104,65,155,11,"_configuration"],[104,79,155,25],[104,80,155,26,"useNativeReachability"],[104,101,155,47],[104,103,156,6],[105,8,157,6],[105,12,157,10],[105,13,157,11,"_setIsInternetReachable"],[105,36,157,34],[105,37,157,35,"state"],[105,42,157,40],[105,43,157,41,"isInternetReachable"],[105,62,157,60],[105,63,157,61],[106,6,158,4],[106,7,158,5],[106,13,158,11],[107,8,159,6],[107,12,159,10],[107,13,159,11,"_setExpectsConnection"],[107,34,159,32],[107,35,159,33,"state"],[107,40,159,38],[107,41,159,39,"isConnected"],[107,52,159,50],[107,53,159,51],[108,6,160,4],[109,4,161,2],[109,5,161,3],[110,4,161,3],[110,9,163,9,"currentState"],[110,21,163,21],[110,24,163,24],[110,30,163,58],[111,6,164,4],[111,13,164,11],[111,17,164,15],[111,18,164,16,"_isInternetReachable"],[111,38,164,36],[112,4,165,2],[112,5,165,3],[113,4,165,3],[113,9,167,9,"tearDown"],[113,17,167,17],[113,20,167,20],[113,26,167,32],[114,6,168,4],[115,6,169,4],[115,10,169,8],[115,14,169,12],[115,15,169,13,"_currentInternetReachabilityCheckHandler"],[115,55,169,53],[115,60,169,58],[115,64,169,62],[115,66,169,64],[116,8,170,6],[116,12,170,10],[116,13,170,11,"_currentInternetReachabilityCheckHandler"],[116,53,170,51],[116,54,170,52,"cancel"],[116,60,170,58],[116,61,170,59],[116,62,170,60],[117,8,171,6],[117,12,171,10],[117,13,171,11,"_currentInternetReachabilityCheckHandler"],[117,53,171,51],[117,56,171,54],[117,60,171,58],[118,6,172,4],[120,6,174,4],[121,6,175,4],[121,10,175,8],[121,14,175,12],[121,15,175,13,"_currentTimeoutHandle"],[121,36,175,34],[121,41,175,39],[121,45,175,43],[121,47,175,45],[122,8,176,6,"clearTimeout"],[122,20,176,18],[122,21,176,19],[122,25,176,23],[122,26,176,24,"_currentTimeoutHandle"],[122,47,176,45],[122,48,176,46],[123,8,177,6],[123,12,177,10],[123,13,177,11,"_currentTimeoutHandle"],[123,34,177,32],[123,37,177,35],[123,41,177,39],[124,6,178,4],[125,4,179,2],[125,5,179,3],[126,4,29,4],[126,8,29,8],[126,9,29,9,"_configuration"],[126,23,29,23],[126,26,29,26,"configuration"],[126,39,29,39],[127,4,30,4],[127,8,30,8],[127,9,30,9,"_listener"],[127,18,30,18],[127,21,30,21,"listener"],[127,29,30,29],[128,2,31,2],[128,3,31,3],[129,0,31,3],[129,3]],"functionMap":{"names":["<global>","InternetReachability","InternetReachability#constructor","InternetReachability#_setIsInternetReachable","InternetReachability#_setExpectsConnection","InternetReachability#_checkInternetReachability","Promise$argument_0","setTimeout$argument_0","cancel","Promise.race.then$argument_0","Promise.race.then.then$argument_0","Promise.race.then.then._catch$argument_0","Promise.race..._catch.then$argument_0","Promise.race..._catch.then$argument_1","InternetReachability#update","InternetReachability#currentState","InternetReachability#tearDown"],"mappings":"AAA;eCiB;ECO;GDM;oCEE;GFS;kCGE;GHwB;uCIE;iDCY;QCE,8BD;KDG;6BGI,cH;gDCC;eEC,8BF;KDC;QIQ;SJE;QKG;SLS;QMG;SNc;QOI;SPE;QQC;SRG;GJO;kBaE;GbS;wBcE;GdE;oBeE;GfY;CDC"}},"type":"js/module"}]}